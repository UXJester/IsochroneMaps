<!DOCTYPE html>
<html>
<head>
    
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    
        <script>
            L_NO_TOUCH = false;
            L_DISABLE_3D = false;
        </script>
    
    <style>html, body {width: 100%;height: 100%;margin: 0;padding: 0;}</style>
    <style>#map {position:absolute;top:0;bottom:0;right:0;left:0;}</style>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css"/>
    
            <meta name="viewport" content="width=device-width,
                initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
            <style>
                #map_80eb9082f95f2ef0f4eb923a6d89cfe8 {
                    position: relative;
                    width: 100.0%;
                    height: 100.0%;
                    left: 0.0%;
                    top: 0.0%;
                }
                .leaflet-container { font-size: 1rem; }
            </style>
        
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.2/leaflet.draw.css"/>
    
            <style>
                #export {
                    position: absolute;
                    top: 5px;
                    right: 10px;
                    z-index: 999;
                    background: white;
                    color: black;
                    padding: 6px;
                    border-radius: 4px;
                    font-family: 'Helvetica Neue';
                    cursor: pointer;
                    font-size: 12px;
                    text-decoration: none;
                    top: 90px;
                }
            </style>
        
</head>
<body>
    
    
            <div class="folium-map" id="map_80eb9082f95f2ef0f4eb923a6d89cfe8" ></div>
        
    <a href='#' id='export'>Export</a>
</body>
<script>
    
    
            var map_80eb9082f95f2ef0f4eb923a6d89cfe8 = L.map(
                "map_80eb9082f95f2ef0f4eb923a6d89cfe8",
                {
                    center: [41.2964104264669, -88.83033555861162],
                    crs: L.CRS.EPSG3857,
                    ...{
  "zoom": 8,
  "zoomControl": true,
  "preferCanvas": false,
}

                }
            );
            L.control.scale().addTo(map_80eb9082f95f2ef0f4eb923a6d89cfe8);

            

        
    
            var tile_layer_b5402817e9bfcb041cd4eb60d0cf2137 = L.tileLayer(
                "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
                {
  "minZoom": 0,
  "maxZoom": 19,
  "maxNativeZoom": 19,
  "noWrap": false,
  "attribution": "\u0026copy; \u003ca href=\"https://www.openstreetmap.org/copyright\"\u003eOpenStreetMap\u003c/a\u003e contributors",
  "subdomains": "abc",
  "detectRetina": false,
  "tms": false,
  "opacity": 1,
}

            );
        
    
            tile_layer_b5402817e9bfcb041cd4eb60d0cf2137.addTo(map_80eb9082f95f2ef0f4eb923a6d89cfe8);
        
    
            var feature_group_10f6be4724a7f3c98a926e929a4a5f0d = L.featureGroup(
                {
}
            );
        
    
            feature_group_10f6be4724a7f3c98a926e929a4a5f0d.addTo(map_80eb9082f95f2ef0f4eb923a6d89cfe8);
        
    
            var feature_group_a7a661ae32a31efd2e5d571290df788a = L.featureGroup(
                {
}
            );
        
    
        function geo_json_ac9c1ce61bfc1cb1548592eb7aeca0ba_styler(feature) {
            switch(feature.properties.group_index) {
                default:
                    return {"color": "gray", "fillColor": "gray", "fillOpacity": 0.4, "weight": 2};
            }
        }

        function geo_json_ac9c1ce61bfc1cb1548592eb7aeca0ba_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_ac9c1ce61bfc1cb1548592eb7aeca0ba = L.geoJson(null, {
                onEachFeature: geo_json_ac9c1ce61bfc1cb1548592eb7aeca0ba_onEachFeature,
            
                style: geo_json_ac9c1ce61bfc1cb1548592eb7aeca0ba_styler,
            ...{
}
        });

        function geo_json_ac9c1ce61bfc1cb1548592eb7aeca0ba_add (data) {
            geo_json_ac9c1ce61bfc1cb1548592eb7aeca0ba
                .addData(data);
        }
            geo_json_ac9c1ce61bfc1cb1548592eb7aeca0ba_add({"features": [{"geometry": {"coordinates": [[[-89.904064, 41.402633], [-89.685421, 41.298785], [-89.479619, 41.18297], [-89.407834, 41.081203], [-89.405617, 41.078368], [-89.161383, 40.91036], [-89.108174, 40.851202], [-89.036379, 40.757748], [-89.032781, 40.757845], [-88.814774, 40.930325], [-88.7325, 40.951316], [-88.553467, 40.971435], [-88.41532, 41.007787], [-88.298004, 41.094091], [-88.080468, 41.319561], [-87.934994, 41.542277], [-87.9358, 41.545786], [-88.052769, 41.694921], [-88.124615, 41.686248], [-88.307992, 41.689811], [-88.46971, 41.739952], [-88.477792, 41.742499], [-88.752181, 41.831107], [-88.895207, 41.901358], [-89.018776, 41.999578], [-89.022376, 41.999552], [-89.110548, 41.888514], [-89.32964, 41.718614], [-89.331138, 41.717629], [-89.460161, 41.607956], [-89.687257, 41.487346], [-89.903264, 41.406142], [-89.904064, 41.402633]]], "type": "Polygon"}, "properties": {"center": [-88.84591504117277, 41.351662823954406], "city": "Ottawa", "group_index": 0, "value": 3600.0}, "type": "Feature"}], "type": "FeatureCollection"});

        
    
            geo_json_ac9c1ce61bfc1cb1548592eb7aeca0ba.bindTooltip(
                `<div>
                     Isochrone for Ottawa: 60.0 minutes
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            geo_json_ac9c1ce61bfc1cb1548592eb7aeca0ba.addTo(feature_group_a7a661ae32a31efd2e5d571290df788a);
        
    
        function geo_json_e39fadf513489f9abeb10bd5e9c323d2_styler(feature) {
            switch(feature.properties.group_index) {
                default:
                    return {"color": "red", "fillColor": "red", "fillOpacity": 0.4, "weight": 2};
            }
        }

        function geo_json_e39fadf513489f9abeb10bd5e9c323d2_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_e39fadf513489f9abeb10bd5e9c323d2 = L.geoJson(null, {
                onEachFeature: geo_json_e39fadf513489f9abeb10bd5e9c323d2_onEachFeature,
            
                style: geo_json_e39fadf513489f9abeb10bd5e9c323d2_styler,
            ...{
}
        });

        function geo_json_e39fadf513489f9abeb10bd5e9c323d2_add (data) {
            geo_json_e39fadf513489f9abeb10bd5e9c323d2
                .addData(data);
        }
            geo_json_e39fadf513489f9abeb10bd5e9c323d2_add({"features": [{"geometry": {"coordinates": [[[-90.003243, 42.356949], [-90.001631, 42.355277], [-89.771065, 42.152764], [-89.747217, 42.141192], [-89.589302, 42.035619], [-89.481338, 41.81807], [-89.479725, 41.814852], [-89.231999, 41.756292], [-89.063171, 41.555156], [-89.05959, 41.555532], [-88.905755, 41.688277], [-88.818256, 41.767018], [-88.575006, 41.865379], [-88.341651, 42.032058], [-88.285081, 42.032264], [-88.284994, 42.032292], [-88.191732, 42.057498], [-88.161952, 42.064677], [-88.161953, 42.068277], [-88.371582, 42.191961], [-88.463375, 42.462082], [-88.508982, 42.684047], [-88.511461, 42.686657], [-88.732058, 42.72028], [-88.887875, 42.871352], [-88.890483, 42.873833], [-89.084098, 42.930516], [-89.087569, 42.929561], [-89.28888, 42.717708], [-89.368506, 42.703121], [-89.368567, 42.703111], [-89.388483, 42.692482], [-89.662748, 42.557395], [-89.906106, 42.430119], [-89.983798, 42.375242], [-90.001681, 42.358876], [-90.003246, 42.357014], [-90.003243, 42.356949]]], "type": "Polygon"}, "properties": {"center": [-89.09380648549796, 42.27160374865368], "city": "Rockford", "group_index": 0, "value": 3600.0}, "type": "Feature"}], "type": "FeatureCollection"});

        
    
            geo_json_e39fadf513489f9abeb10bd5e9c323d2.bindTooltip(
                `<div>
                     Isochrone for Rockford: 60.0 minutes
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            geo_json_e39fadf513489f9abeb10bd5e9c323d2.addTo(feature_group_a7a661ae32a31efd2e5d571290df788a);
        
    
        function geo_json_f4849637dc60926d55d95702497d0918_styler(feature) {
            switch(feature.properties.group_index) {
                default:
                    return {"color": "purple", "fillColor": "purple", "fillOpacity": 0.4, "weight": 2};
            }
        }

        function geo_json_f4849637dc60926d55d95702497d0918_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_f4849637dc60926d55d95702497d0918 = L.geoJson(null, {
                onEachFeature: geo_json_f4849637dc60926d55d95702497d0918_onEachFeature,
            
                style: geo_json_f4849637dc60926d55d95702497d0918_styler,
            ...{
}
        });

        function geo_json_f4849637dc60926d55d95702497d0918_add (data) {
            geo_json_f4849637dc60926d55d95702497d0918
                .addData(data);
        }
            geo_json_f4849637dc60926d55d95702497d0918_add({"features": [{"geometry": {"coordinates": [[[-90.544312, 39.682582], [-90.330872, 39.546187], [-90.229982, 39.542076], [-90.226382, 39.542051], [-89.983351, 39.494643], [-89.888867, 39.367679], [-89.87114, 39.33645], [-89.8347, 39.275106], [-89.769429, 39.072699], [-89.757618, 39.045799], [-89.754018, 39.045821], [-89.586404, 39.172327], [-89.535838, 39.21235], [-89.461233, 39.303173], [-89.295749, 39.426231], [-89.141384, 39.434156], [-89.140145, 39.434467], [-88.97667, 39.622705], [-88.828798, 39.730839], [-88.826452, 39.733569], [-88.730661, 40.015832], [-88.730964, 40.019419], [-88.735493, 40.019036], [-88.740022, 40.018654], [-88.745309, 40.018205], [-88.963788, 40.076812], [-89.108515, 40.313535], [-89.105992, 40.358229], [-89.108699, 40.360602], [-89.415914, 40.426824], [-89.469612, 40.48061], [-89.473212, 40.480561], [-89.608471, 40.307308], [-89.803539, 40.227197], [-89.987339, 40.128318], [-90.207474, 39.979646], [-90.232498, 39.962685], [-90.425134, 39.778781], [-90.544067, 39.686174], [-90.544312, 39.682582]]], "type": "Polygon"}, "properties": {"center": [-89.64396199848665, 39.798808487138885], "city": "Springfield", "group_index": 0, "value": 3600.0}, "type": "Feature"}], "type": "FeatureCollection"});

        
    
            geo_json_f4849637dc60926d55d95702497d0918.bindTooltip(
                `<div>
                     Isochrone for Springfield: 60.0 minutes
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            geo_json_f4849637dc60926d55d95702497d0918.addTo(feature_group_a7a661ae32a31efd2e5d571290df788a);
        
    
        function geo_json_151636c6a9e5f884f447b3c4ab626188_styler(feature) {
            switch(feature.properties.group_index) {
                default:
                    return {"color": "orange", "fillColor": "orange", "fillOpacity": 0.4, "weight": 2};
            }
        }

        function geo_json_151636c6a9e5f884f447b3c4ab626188_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_151636c6a9e5f884f447b3c4ab626188 = L.geoJson(null, {
                onEachFeature: geo_json_151636c6a9e5f884f447b3c4ab626188_onEachFeature,
            
                style: geo_json_151636c6a9e5f884f447b3c4ab626188_styler,
            ...{
}
        });

        function geo_json_151636c6a9e5f884f447b3c4ab626188_add (data) {
            geo_json_151636c6a9e5f884f447b3c4ab626188
                .addData(data);
        }
            geo_json_151636c6a9e5f884f447b3c4ab626188_add({"features": [{"geometry": {"coordinates": [[[-90.47579, 40.916664], [-90.285656, 40.709463], [-90.275713, 40.697086], [-90.182322, 40.560187], [-90.162482, 40.393122], [-90.16248, 40.39293], [-90.161834, 40.39135], [-90.155464, 40.386511], [-90.090054, 40.339668], [-90.086456, 40.339797], [-89.84673, 40.294406], [-89.697443, 40.227516], [-89.559771, 39.954972], [-89.556208, 39.954454], [-89.304299, 40.081888], [-89.301637, 40.084311], [-89.24833, 40.147949], [-88.968022, 40.227166], [-88.726672, 40.308875], [-88.724426, 40.311688], [-88.747613, 40.345235], [-88.739189, 40.637641], [-88.735213, 40.72282], [-88.735192, 40.723812], [-88.735203, 40.724751], [-88.735337, 40.730094], [-88.735472, 40.735436], [-89.000184, 40.870236], [-89.139412, 41.031401], [-89.220749, 41.120244], [-89.345059, 41.262126], [-89.398923, 41.299441], [-89.402523, 41.299369], [-89.661475, 41.179228], [-89.924304, 41.165955], [-89.927902, 41.16586], [-90.009553, 41.107128], [-90.044005, 41.081928], [-90.329355, 41.149007], [-90.332916, 41.149532], [-90.446959, 40.985586], [-90.466404, 40.949184], [-90.477525, 40.919818], [-90.47579, 40.916664]]], "type": "Polygon"}, "properties": {"center": [-89.58901895606702, 40.69378463124665], "city": "Peoria", "group_index": 0, "value": 3600.0}, "type": "Feature"}], "type": "FeatureCollection"});

        
    
            geo_json_151636c6a9e5f884f447b3c4ab626188.bindTooltip(
                `<div>
                     Isochrone for Peoria: 60.0 minutes
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            geo_json_151636c6a9e5f884f447b3c4ab626188.addTo(feature_group_a7a661ae32a31efd2e5d571290df788a);
        
    
        function geo_json_2adeca1d4c5b3421799bbcf15a35035a_styler(feature) {
            switch(feature.properties.group_index) {
                default:
                    return {"color": "blue", "fillColor": "blue", "fillOpacity": 0.4, "weight": 2};
            }
        }

        function geo_json_2adeca1d4c5b3421799bbcf15a35035a_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_2adeca1d4c5b3421799bbcf15a35035a = L.geoJson(null, {
                onEachFeature: geo_json_2adeca1d4c5b3421799bbcf15a35035a_onEachFeature,
            
                style: geo_json_2adeca1d4c5b3421799bbcf15a35035a_styler,
            ...{
}
        });

        function geo_json_2adeca1d4c5b3421799bbcf15a35035a_add (data) {
            geo_json_2adeca1d4c5b3421799bbcf15a35035a
                .addData(data);
        }
            geo_json_2adeca1d4c5b3421799bbcf15a35035a_add({"features": [{"geometry": {"coordinates": [[[-88.403138, 42.106174], [-88.478459, 41.824222], [-88.477448, 41.822917], [-88.476777, 41.8221], [-88.475442, 41.820479], [-88.474805, 41.819863], [-88.417739, 41.766359], [-88.204337, 41.612057], [-88.182153, 41.549295], [-88.060279, 41.511395], [-87.823514, 41.315579], [-87.820004, 41.314782], [-87.52422, 41.417892], [-87.315744, 41.522052], [-87.138976, 41.570051], [-87.135249, 41.603779], [-87.136548, 41.607137], [-87.253726, 41.619937], [-87.409741, 41.671006], [-87.601268, 41.892157], [-87.67097, 42.05929], [-87.681029, 42.079244], [-87.829948, 42.347853], [-87.831464, 42.349825], [-87.894273, 42.371036], [-87.934781, 42.360642], [-87.937441, 42.358216], [-88.108229, 42.192357], [-88.23149, 42.135734], [-88.401974, 42.109581], [-88.403138, 42.106174]]], "type": "Polygon"}, "properties": {"center": [-87.62434832724945, 41.87556204333322], "city": "Chicago", "group_index": 0, "value": 3600.0}, "type": "Feature"}], "type": "FeatureCollection"});

        
    
            geo_json_2adeca1d4c5b3421799bbcf15a35035a.bindTooltip(
                `<div>
                     Isochrone for Chicago: 60.0 minutes
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            geo_json_2adeca1d4c5b3421799bbcf15a35035a.addTo(feature_group_a7a661ae32a31efd2e5d571290df788a);
        
    
        function geo_json_6f34fcde8b463f2c3c0a77fce14b152b_styler(feature) {
            switch(feature.properties.group_index) {
                default:
                    return {"color": "green", "fillColor": "green", "fillOpacity": 0.4, "weight": 2};
            }
        }

        function geo_json_6f34fcde8b463f2c3c0a77fce14b152b_onEachFeature(feature, layer) {
            layer.on({
            });
        };
        var geo_json_6f34fcde8b463f2c3c0a77fce14b152b = L.geoJson(null, {
                onEachFeature: geo_json_6f34fcde8b463f2c3c0a77fce14b152b_onEachFeature,
            
                style: geo_json_6f34fcde8b463f2c3c0a77fce14b152b_styler,
            ...{
}
        });

        function geo_json_6f34fcde8b463f2c3c0a77fce14b152b_add (data) {
            geo_json_6f34fcde8b463f2c3c0a77fce14b152b
                .addData(data);
        }
            geo_json_6f34fcde8b463f2c3c0a77fce14b152b_add({"features": [{"geometry": {"coordinates": [[[-89.04305, 41.900501], [-88.763772, 41.767317], [-88.697318, 41.708849], [-88.572573, 41.572507], [-88.538227, 41.379253], [-88.53818, 41.375654], [-88.282946, 41.219141], [-88.084346, 41.319479], [-87.957889, 41.353085], [-87.764459, 41.400376], [-87.599718, 41.576873], [-87.599401, 41.578541], [-87.599218, 41.580439], [-87.593955, 41.818218], [-87.601268, 41.892157], [-87.709824, 42.005798], [-87.834631, 42.169039], [-87.899462, 42.237147], [-87.903062, 42.237143], [-88.111659, 42.21385], [-88.404527, 42.110683], [-88.454514, 42.096119], [-88.473456, 42.090361], [-88.554092, 42.058767], [-88.784789, 42.015139], [-89.025509, 41.916627], [-89.043539, 41.904068], [-89.04305, 41.900501]]], "type": "Polygon"}, "properties": {"center": [-88.14785056868095, 41.772867475932635], "city": "Naperville", "group_index": 0, "value": 3600.0}, "type": "Feature"}], "type": "FeatureCollection"});

        
    
            geo_json_6f34fcde8b463f2c3c0a77fce14b152b.bindTooltip(
                `<div>
                     Isochrone for Naperville: 60.0 minutes
                 </div>`,
                {
  "sticky": true,
}
            );
        
    
            geo_json_6f34fcde8b463f2c3c0a77fce14b152b.addTo(feature_group_a7a661ae32a31efd2e5d571290df788a);
        
    
            feature_group_a7a661ae32a31efd2e5d571290df788a.addTo(map_80eb9082f95f2ef0f4eb923a6d89cfe8);
        
    
            var feature_group_9313843b69d6d01c0b33a14277ced273 = L.featureGroup(
                {
}
            );
        
    
            var marker_3e438a4ba6efa35089353649ee7302c5 = L.marker(
                [41.8755616, -87.6244212],
                {
}
            ).addTo(feature_group_9313843b69d6d01c0b33a14277ced273);
        
    
            var icon_9be7e5d8d2a290250ead5818a3211328 = L.AwesomeMarkers.icon(
                {
  "markerColor": "red",
  "iconColor": "white",
  "icon": "tower",
  "prefix": "glyphicon",
  "extraClasses": "fa-rotate-0",
}
            );
        
    
        var popup_05511b8409a820e57857b70776abed63 = L.popup({
  "maxWidth": 300,
});

        
            
                var html_95d5090e190a1be1560d1d09892dbad2 = $(`<div id="html_95d5090e190a1be1560d1d09892dbad2" style="width: 100.0%; height: 100.0%;"><b>Chicago</b></div>`)[0];
                popup_05511b8409a820e57857b70776abed63.setContent(html_95d5090e190a1be1560d1d09892dbad2);
            
        

        marker_3e438a4ba6efa35089353649ee7302c5.bindPopup(popup_05511b8409a820e57857b70776abed63)
        ;

        
    
    
            marker_3e438a4ba6efa35089353649ee7302c5.bindTooltip(
                `<div>
                     Chicago
                 </div>`,
                {
  "direction": "top",
  "show": true,
  "sticky": true,
}
            );
        
    
                marker_3e438a4ba6efa35089353649ee7302c5.setIcon(icon_9be7e5d8d2a290250ead5818a3211328);
            
    
            var marker_67863e605e7a6f120e3411ab91d19e8f = L.marker(
                [41.8755616, -87.6244212],
                {
}
            ).addTo(feature_group_9313843b69d6d01c0b33a14277ced273);
        
    
            var div_icon_47508d673d6527414338ef1c6f3b1d67 = L.divIcon({
  "html": "\n                \u003cdiv style=\"background-color: black; font-size: 9px; color: white; text-align: center; width: max-content; border-radius: 4px; padding: 2px 4px; position: absolute; top: -50px; left: -125%;\"\u003e\n                    \u003cb\u003eChicago\u003c/b\u003e\n                \u003c/div\u003e\n                ",
  "className": "empty",
});
            marker_67863e605e7a6f120e3411ab91d19e8f.setIcon(div_icon_47508d673d6527414338ef1c6f3b1d67);
        
    
                marker_67863e605e7a6f120e3411ab91d19e8f.setIcon(div_icon_47508d673d6527414338ef1c6f3b1d67);
            
    
            var marker_afde62f7694f555ea35e531981ec8bc5 = L.marker(
                [41.7728699, -88.1479278],
                {
}
            ).addTo(feature_group_9313843b69d6d01c0b33a14277ced273);
        
    
            var icon_9453f307890cc8c76886f9a243e44b2b = L.AwesomeMarkers.icon(
                {
  "markerColor": "red",
  "iconColor": "white",
  "icon": "tower",
  "prefix": "glyphicon",
  "extraClasses": "fa-rotate-0",
}
            );
        
    
        var popup_97acac53d709e790683dd3337cd33b37 = L.popup({
  "maxWidth": 300,
});

        
            
                var html_cd5bb76b602690f87a7d93a50b2367ae = $(`<div id="html_cd5bb76b602690f87a7d93a50b2367ae" style="width: 100.0%; height: 100.0%;"><b>Naperville</b></div>`)[0];
                popup_97acac53d709e790683dd3337cd33b37.setContent(html_cd5bb76b602690f87a7d93a50b2367ae);
            
        

        marker_afde62f7694f555ea35e531981ec8bc5.bindPopup(popup_97acac53d709e790683dd3337cd33b37)
        ;

        
    
    
            marker_afde62f7694f555ea35e531981ec8bc5.bindTooltip(
                `<div>
                     Naperville
                 </div>`,
                {
  "direction": "top",
  "show": true,
  "sticky": true,
}
            );
        
    
                marker_afde62f7694f555ea35e531981ec8bc5.setIcon(icon_9453f307890cc8c76886f9a243e44b2b);
            
    
            var marker_9a87a6d147d3aa40aca76ddc95072e05 = L.marker(
                [41.7728699, -88.1479278],
                {
}
            ).addTo(feature_group_9313843b69d6d01c0b33a14277ced273);
        
    
            var div_icon_bd767a3f72d0351487554daa36aa1968 = L.divIcon({
  "html": "\n                \u003cdiv style=\"background-color: black; font-size: 9px; color: white; text-align: center; width: max-content; border-radius: 4px; padding: 2px 4px; position: absolute; top: -50px; left: -125%;\"\u003e\n                    \u003cb\u003eNaperville\u003c/b\u003e\n                \u003c/div\u003e\n                ",
  "className": "empty",
});
            marker_9a87a6d147d3aa40aca76ddc95072e05.setIcon(div_icon_bd767a3f72d0351487554daa36aa1968);
        
    
                marker_9a87a6d147d3aa40aca76ddc95072e05.setIcon(div_icon_bd767a3f72d0351487554daa36aa1968);
            
    
            var marker_9b20025e0798f7592817abee05f78638 = L.marker(
                [40.6938609, -89.5891008],
                {
}
            ).addTo(feature_group_9313843b69d6d01c0b33a14277ced273);
        
    
            var icon_8156f52460ea12b86fa6570dea492c90 = L.AwesomeMarkers.icon(
                {
  "markerColor": "red",
  "iconColor": "white",
  "icon": "tower",
  "prefix": "glyphicon",
  "extraClasses": "fa-rotate-0",
}
            );
        
    
        var popup_c6b77912046265902e50c1d35847ef6e = L.popup({
  "maxWidth": 300,
});

        
            
                var html_f8d2b3e8f9ce0ad15da693f4d1dd5173 = $(`<div id="html_f8d2b3e8f9ce0ad15da693f4d1dd5173" style="width: 100.0%; height: 100.0%;"><b>Peoria</b></div>`)[0];
                popup_c6b77912046265902e50c1d35847ef6e.setContent(html_f8d2b3e8f9ce0ad15da693f4d1dd5173);
            
        

        marker_9b20025e0798f7592817abee05f78638.bindPopup(popup_c6b77912046265902e50c1d35847ef6e)
        ;

        
    
    
            marker_9b20025e0798f7592817abee05f78638.bindTooltip(
                `<div>
                     Peoria
                 </div>`,
                {
  "direction": "top",
  "show": true,
  "sticky": true,
}
            );
        
    
                marker_9b20025e0798f7592817abee05f78638.setIcon(icon_8156f52460ea12b86fa6570dea492c90);
            
    
            var marker_77ccf895c21e4411e842d7455da551ee = L.marker(
                [40.6938609, -89.5891008],
                {
}
            ).addTo(feature_group_9313843b69d6d01c0b33a14277ced273);
        
    
            var div_icon_384bd7e83811d5f6c5f81362533a71f2 = L.divIcon({
  "html": "\n                \u003cdiv style=\"background-color: black; font-size: 9px; color: white; text-align: center; width: max-content; border-radius: 4px; padding: 2px 4px; position: absolute; top: -50px; left: -125%;\"\u003e\n                    \u003cb\u003ePeoria\u003c/b\u003e\n                \u003c/div\u003e\n                ",
  "className": "empty",
});
            marker_77ccf895c21e4411e842d7455da551ee.setIcon(div_icon_384bd7e83811d5f6c5f81362533a71f2);
        
    
                marker_77ccf895c21e4411e842d7455da551ee.setIcon(div_icon_384bd7e83811d5f6c5f81362533a71f2);
            
    
            var marker_a0fc7440c98272065a4be5c321a0745c = L.marker(
                [39.7990175, -89.6439575],
                {
}
            ).addTo(feature_group_9313843b69d6d01c0b33a14277ced273);
        
    
            var icon_2da71c885b2c03b51491a3e8a950fa19 = L.AwesomeMarkers.icon(
                {
  "markerColor": "red",
  "iconColor": "white",
  "icon": "tower",
  "prefix": "glyphicon",
  "extraClasses": "fa-rotate-0",
}
            );
        
    
        var popup_4121df803c40d5c771231abe4282d6b5 = L.popup({
  "maxWidth": 300,
});

        
            
                var html_ff550b0f2b618d895b6b5bdc7623eb60 = $(`<div id="html_ff550b0f2b618d895b6b5bdc7623eb60" style="width: 100.0%; height: 100.0%;"><b>Springfield</b></div>`)[0];
                popup_4121df803c40d5c771231abe4282d6b5.setContent(html_ff550b0f2b618d895b6b5bdc7623eb60);
            
        

        marker_a0fc7440c98272065a4be5c321a0745c.bindPopup(popup_4121df803c40d5c771231abe4282d6b5)
        ;

        
    
    
            marker_a0fc7440c98272065a4be5c321a0745c.bindTooltip(
                `<div>
                     Springfield
                 </div>`,
                {
  "direction": "top",
  "show": true,
  "sticky": true,
}
            );
        
    
                marker_a0fc7440c98272065a4be5c321a0745c.setIcon(icon_2da71c885b2c03b51491a3e8a950fa19);
            
    
            var marker_092d6e08e8018fa70837a6632d175a89 = L.marker(
                [39.7990175, -89.6439575],
                {
}
            ).addTo(feature_group_9313843b69d6d01c0b33a14277ced273);
        
    
            var div_icon_119c57b7dee114754deb6483c4fc5dcc = L.divIcon({
  "html": "\n                \u003cdiv style=\"background-color: black; font-size: 9px; color: white; text-align: center; width: max-content; border-radius: 4px; padding: 2px 4px; position: absolute; top: -50px; left: -125%;\"\u003e\n                    \u003cb\u003eSpringfield\u003c/b\u003e\n                \u003c/div\u003e\n                ",
  "className": "empty",
});
            marker_092d6e08e8018fa70837a6632d175a89.setIcon(div_icon_119c57b7dee114754deb6483c4fc5dcc);
        
    
                marker_092d6e08e8018fa70837a6632d175a89.setIcon(div_icon_119c57b7dee114754deb6483c4fc5dcc);
            
    
            var marker_04d61dd14abd27bcb957a292e4603f9d = L.marker(
                [42.2713945, -89.093966],
                {
}
            ).addTo(feature_group_9313843b69d6d01c0b33a14277ced273);
        
    
            var icon_cc79d9dcd45088b5dc0595d1459ec0b2 = L.AwesomeMarkers.icon(
                {
  "markerColor": "red",
  "iconColor": "white",
  "icon": "tower",
  "prefix": "glyphicon",
  "extraClasses": "fa-rotate-0",
}
            );
        
    
        var popup_61260a8d4016a94c42ce585ff9005c2e = L.popup({
  "maxWidth": 300,
});

        
            
                var html_56ad8f1213bdea42a723e502778d8118 = $(`<div id="html_56ad8f1213bdea42a723e502778d8118" style="width: 100.0%; height: 100.0%;"><b>Rockford</b></div>`)[0];
                popup_61260a8d4016a94c42ce585ff9005c2e.setContent(html_56ad8f1213bdea42a723e502778d8118);
            
        

        marker_04d61dd14abd27bcb957a292e4603f9d.bindPopup(popup_61260a8d4016a94c42ce585ff9005c2e)
        ;

        
    
    
            marker_04d61dd14abd27bcb957a292e4603f9d.bindTooltip(
                `<div>
                     Rockford
                 </div>`,
                {
  "direction": "top",
  "show": true,
  "sticky": true,
}
            );
        
    
                marker_04d61dd14abd27bcb957a292e4603f9d.setIcon(icon_cc79d9dcd45088b5dc0595d1459ec0b2);
            
    
            var marker_1b6a07763ac3d42557642af3bf15ada4 = L.marker(
                [42.2713945, -89.093966],
                {
}
            ).addTo(feature_group_9313843b69d6d01c0b33a14277ced273);
        
    
            var div_icon_7515c4856534dec2f708482209023fcd = L.divIcon({
  "html": "\n                \u003cdiv style=\"background-color: black; font-size: 9px; color: white; text-align: center; width: max-content; border-radius: 4px; padding: 2px 4px; position: absolute; top: -50px; left: -125%;\"\u003e\n                    \u003cb\u003eRockford\u003c/b\u003e\n                \u003c/div\u003e\n                ",
  "className": "empty",
});
            marker_1b6a07763ac3d42557642af3bf15ada4.setIcon(div_icon_7515c4856534dec2f708482209023fcd);
        
    
                marker_1b6a07763ac3d42557642af3bf15ada4.setIcon(div_icon_7515c4856534dec2f708482209023fcd);
            
    
            var marker_edd3e35d232f710052bb89ca9f0db809 = L.marker(
                [41.3516628, -88.845436],
                {
}
            ).addTo(feature_group_9313843b69d6d01c0b33a14277ced273);
        
    
            var icon_85050eb4d7efd88fb13d39c85b5bc9ca = L.AwesomeMarkers.icon(
                {
  "markerColor": "red",
  "iconColor": "white",
  "icon": "tower",
  "prefix": "glyphicon",
  "extraClasses": "fa-rotate-0",
}
            );
        
    
        var popup_f671d2a72653bc97b427d759807b81e6 = L.popup({
  "maxWidth": 300,
});

        
            
                var html_114b38f369452d466dd7ad38273e8245 = $(`<div id="html_114b38f369452d466dd7ad38273e8245" style="width: 100.0%; height: 100.0%;"><b>Ottawa</b></div>`)[0];
                popup_f671d2a72653bc97b427d759807b81e6.setContent(html_114b38f369452d466dd7ad38273e8245);
            
        

        marker_edd3e35d232f710052bb89ca9f0db809.bindPopup(popup_f671d2a72653bc97b427d759807b81e6)
        ;

        
    
    
            marker_edd3e35d232f710052bb89ca9f0db809.bindTooltip(
                `<div>
                     Ottawa
                 </div>`,
                {
  "direction": "top",
  "show": true,
  "sticky": true,
}
            );
        
    
                marker_edd3e35d232f710052bb89ca9f0db809.setIcon(icon_85050eb4d7efd88fb13d39c85b5bc9ca);
            
    
            var marker_3ddaf79803844f9232e45a1f346f9622 = L.marker(
                [41.3516628, -88.845436],
                {
}
            ).addTo(feature_group_9313843b69d6d01c0b33a14277ced273);
        
    
            var div_icon_7c293f331cde4f1604ee50d7dcdc7317 = L.divIcon({
  "html": "\n                \u003cdiv style=\"background-color: black; font-size: 9px; color: white; text-align: center; width: max-content; border-radius: 4px; padding: 2px 4px; position: absolute; top: -50px; left: -125%;\"\u003e\n                    \u003cb\u003eOttawa\u003c/b\u003e\n                \u003c/div\u003e\n                ",
  "className": "empty",
});
            marker_3ddaf79803844f9232e45a1f346f9622.setIcon(div_icon_7c293f331cde4f1604ee50d7dcdc7317);
        
    
                marker_3ddaf79803844f9232e45a1f346f9622.setIcon(div_icon_7c293f331cde4f1604ee50d7dcdc7317);
            
    
            feature_group_9313843b69d6d01c0b33a14277ced273.addTo(map_80eb9082f95f2ef0f4eb923a6d89cfe8);
        
    
            var layer_control_c1eb7f5dff2e65286476a8795438ba60_layers = {
                base_layers : {
                    "openstreetmap" : tile_layer_b5402817e9bfcb041cd4eb60d0cf2137,
                },
                overlays :  {
                    "Draw Layer" : feature_group_10f6be4724a7f3c98a926e929a4a5f0d,
                    "Isochrones" : feature_group_a7a661ae32a31efd2e5d571290df788a,
                    "Cities" : feature_group_9313843b69d6d01c0b33a14277ced273,
                },
            };
            let layer_control_c1eb7f5dff2e65286476a8795438ba60 = L.control.layers(
                layer_control_c1eb7f5dff2e65286476a8795438ba60_layers.base_layers,
                layer_control_c1eb7f5dff2e65286476a8795438ba60_layers.overlays,
                {
  "position": "topright",
  "collapsed": true,
  "autoZIndex": true,
}
            ).addTo(map_80eb9082f95f2ef0f4eb923a6d89cfe8);

        
    
            var options = {
              position: "topleft",
              draw: {"circle": {"feet": false, "metric": false, "nauticalmiles": false, "shapeOptions": {}, "showRadius": true}, "polygon": {"feet": false, "metric": false, "nauticalmiles": false, "showArea": true}, "polyline": {"feet": false, "metric": false, "nauticalmiles": false, "showLength": true}, "rectangle": {"feet": false, "metric": false, "nauticalmiles": false, "showArea": true}},
              edit: {"featureGroup": "editLayer"},
            }
                var drawnItems_draw_control_b1ab349e709c5cf2f4207e5cf29e4ec2 =
                    feature_group_10f6be4724a7f3c98a926e929a4a5f0d;

            options.edit.featureGroup = drawnItems_draw_control_b1ab349e709c5cf2f4207e5cf29e4ec2;
            var draw_control_b1ab349e709c5cf2f4207e5cf29e4ec2 = new L.Control.Draw(
                options
            ).addTo( map_80eb9082f95f2ef0f4eb923a6d89cfe8 );
            map_80eb9082f95f2ef0f4eb923a6d89cfe8.on(L.Draw.Event.CREATED, function(e) {
                var layer = e.layer,
                    type = e.layerType;
                var coords = JSON.stringify(layer.toGeoJSON());
                drawnItems_draw_control_b1ab349e709c5cf2f4207e5cf29e4ec2.addLayer(layer);
            });
            map_80eb9082f95f2ef0f4eb923a6d89cfe8.on('draw:created', function(e) {
                drawnItems_draw_control_b1ab349e709c5cf2f4207e5cf29e4ec2.addLayer(e.layer);
            });

            
            document.getElementById('export').onclick = function(e) {
                var data = drawnItems_draw_control_b1ab349e709c5cf2f4207e5cf29e4ec2.toGeoJSON();
                var convertedData = 'text/json;charset=utf-8,'
                    + encodeURIComponent(JSON.stringify(data));
                document.getElementById('export').setAttribute(
                    'href', 'data:' + convertedData
                );
                document.getElementById('export').setAttribute(
                    'download', "data.geojson"
                );
            }
            
        
    
      // Haversine formula
      function haversineDistance(latlngs) {
        const R = 6371000; // Radius of the Earth in meters
        let totalDistance = 0;

        for (let i = 0; i < latlngs.length - 1; i++) {
            const [lat1, lon1] = [latlngs[i].lat, latlngs[i].lng];
            const [lat2, lon2] = [latlngs[i + 1].lat, latlngs[i + 1].lng];

            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;

            const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLon / 2) * Math.sin(dLon / 2);

            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
            totalDistance += R * c;
        }

        return totalDistance; // Distance in meters
      }

    map_80eb9082f95f2ef0f4eb923a6d89cfe8.on(L.Draw.Event.CREATED, function(e){
        const layer = e.layer,
              type = e.layerType;

        if (type === 'polyline') {
            // Calculate and display length in miles using haversineDistance function
            const latlngs = layer.getLatLngs();
            const length = haversineDistance(latlngs);
            const lengthInMiles = (length * 0.000621371).toFixed(2);  // Convert meters to miles
            layer.bindTooltip(`Length: ${lengthInMiles} miles`, {
                permanent: false,
                direction: 'top',
                offset: [0, -10]
            }).openTooltip();
        } else if (type === 'polygon' || type === 'rectangle') {
            // Calculate and display area in acres
            const area = L.GeometryUtil.geodesicArea(layer.getLatLngs()[0]);
            const areaInAcres = (area * 0.000247105).toFixed(2);  // Convert m² to acres
            layer.bindTooltip(`Area: ${areaInAcres} acres`, {
                permanent: false,
                direction: 'top',
                offset: [0, -10]
            });
        } else if (type === 'circle') {
            // Calculate and display radius in miles
            const radiusInMiles = (layer.getRadius() * 0.000621371).toFixed(2);
            layer.bindTooltip(`Radius: ${radiusInMiles} miles`, {
                permanent: false,
                direction: 'top',
                offset: [0, -10]
            });
        } else if (type === 'marker') {
            // Display coordinates for markers
            const lat = layer.getLatLng().lat.toFixed(6);
            const lng = layer.getLatLng().lng.toFixed(6);
            layer.bindTooltip(`Coordinates: (${lat}, ${lng})`, {
                permanent: false,
                direction: 'top',
                offset: [0, 0]
            });
        }

        // Add the layer to the drawing layer
        map_80eb9082f95f2ef0f4eb923a6d89cfe8.addLayer(layer);
    });

    
    
        // Initialize Layer Control to dynamically add layers
        let isIsochroneMode = false; // Flag to track isochrone mode
        let layerControl = null; // Do not add layer control initially

        // Add a custom button to the map
        const button = L.control({ position: 'topright' });
        button.onAdd = function (map) {
          const div = L.DomUtil.create('div', 'leaflet-bar leaflet-control leaflet-control-custom');
          div.innerHTML = '<button id="isochrone-btn" style="background-color: white; border: none; padding: 5px; cursor: pointer;">Add Isochrone</button>';
          div.style.backgroundColor = 'white';
          div.style.width = 'auto';
          div.style.height = 'auto';
          return div;
        };
        button.addTo(map_80eb9082f95f2ef0f4eb923a6d89cfe8);

        // Handle button click
        document.getElementById('isochrone-btn').addEventListener('click', function (event) {
          event.stopPropagation(); // Prevent the button click from propagating to the map
          console.log('Add Isochrone button clicked');

          isIsochroneMode = true; // Enable isochrone mode

          // Disable marker popups and tooltips
          map_80eb9082f95f2ef0f4eb923a6d89cfe8.eachLayer(function (layer) {
            if (layer instanceof L.Marker) {
              layer.off('click'); // Disable marker click events
            }
          });

          let tooltip = L.tooltip({
            permanent: false,
            direction: 'right',
            offset: [12, 0]
          });

          // Add a mousemove listener to the map
          function onMouseMove(e) {
            const lat = e.latlng.lat.toFixed(6);
            const lng = e.latlng.lng.toFixed(6);
            tooltip.setLatLng(e.latlng).setContent(`Lat: ${lat}, Lng: ${lng}<br>Click Here`).addTo(map_80eb9082f95f2ef0f4eb923a6d89cfe8);
          }

          map_80eb9082f95f2ef0f4eb923a6d89cfe8.on('mousemove', onMouseMove);

          // Enable map click listener
          function onMapClick(e) {
            const lat = e.latlng.lat;
            const lng = e.latlng.lng;

            console.log(`Map clicked at latitude: ${lat}, longitude: ${lng}`);

            // Create a new feature group for the circle
            const isochroneLayer = L.featureGroup().addTo(map_80eb9082f95f2ef0f4eb923a6d89cfe8);
            const inputName = prompt("Enter a name for the isochrone layer:", "Isochrone");
            const layerName = `${inputName} at (${lat.toFixed(6)}, ${lng.toFixed(6)})`;

            // Add layer control to the map if it doesn't exist
            if (!layerControl) {
              layerControl = L.control.layers(null, {}, { collapsed: false }).addTo(map_80eb9082f95f2ef0f4eb923a6d89cfe8);
              const layerControlName = prompt("Enter a name for the layer control:", "User Generated Layers");
              const title = document.createElement('div');
              title.style = 'font-weight: bold; font-size: 14px; margin-bottom: 5px; border-bottom: 1px solid #ccc;';
              title.innerHTML = layerControlName;
              layerControl.getContainer().insertBefore(title, layerControl.getContainer().firstChild);
            }

            // Add the new layer to the layer control
            layerControl.addOverlay(isochroneLayer, layerName);

            // Call your backend API to generate the isochrone
            fetch(`/generate_isochrone?lat=${lat}&lng=${lng}&time=1800`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Server error: ${response.statusText}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (!data || !data.features) {
                        throw new Error("Invalid GeoJSON object.");
                    }
                    const isochronePolygon = L.geoJSON(data, {
                        style: {
                            color: 'blue',
                            weight: 2,
                            fillOpacity: 0.4
                        }
                    });

                    isochronePolygon.addTo(isochroneLayer);
                    // isochroneLayer.addTo(map_80eb9082f95f2ef0f4eb923a6d89cfe8);
                    isochronePolygon.bindTooltip(`Isochrone for ${layerName}`, {
                        permanent: false,
                        direction: 'top',
                        offset: [0, -10]
                    });
                })
                .catch(error => {
                    console.error("Error generating isochrone:", error);
                    alert(`Failed to generate isochrone: ${error.message}`);
                });

            // Remove the tooltip and mousemove listener after the map is clicked
            cleanup();
          }

          map_80eb9082f95f2ef0f4eb923a6d89cfe8.once('click', onMapClick);

          // End the event when the Escape key is pressed
          function onKeyDown(e) {
            if (e.key === 'Escape') {
              console.log('Escape key pressed, ending isochrone event');
              cleanup();
            }
          }

          document.addEventListener('keydown', onKeyDown);

          // Cleanup function to remove all listeners and the tooltip
          function cleanup() {
            isIsochroneMode = false; // Disable isochrone mode

            // Re-enable marker popups and tooltips
            map_80eb9082f95f2ef0f4eb923a6d89cfe8.eachLayer(function (layer) {
              if (layer instanceof L.Marker) {
                layer.on('click', function (e) {
                  layer.openPopup(); // Re-enable marker click events
                });
              }
            });

            map_80eb9082f95f2ef0f4eb923a6d89cfe8.off('mousemove', onMouseMove);
            map_80eb9082f95f2ef0f4eb923a6d89cfe8.off('click', onMapClick);
            map_80eb9082f95f2ef0f4eb923a6d89cfe8.removeLayer(tooltip);
            document.removeEventListener('keydown', onKeyDown);
          }
        });
    
</script>
</html>